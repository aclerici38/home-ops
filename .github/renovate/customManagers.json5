{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  customManagers: [
    {
      description: ["Process various other dependencies"],
      customType: "regex",
      fileMatch: [".*"], // process regex from everywhere
      matchStrings: [
        // Example: `k3s_release_version: "v1.27.3+k3s1"` (general regex matcher)
        'datasource=(?<datasource>\\S+) depName=(?<depName>\\S+)( versioning=(?<versioning>\\S+))?\n.*?"(?<currentValue>.*)"\n',
        "(?m)datasource=(?<datasource>\\S+)\\s+depName=(?<depName>\\S+)(?:\\s+versioning=(?<versioning>\\S+))?[\\s\\S]*?^\\s*\\S+:\\s*(?<currentValue>\\S+)",
        // Example: `- https://github.com/rancher/system-upgrade-controller/releases/download/v0.11.0/crd.yaml` (e.g. kustomization.yaml lists)
        "datasource=(?<datasource>\\S+) depName=(?<depName>\\S+)( versioning=(?<versioning>\\S+))?\n.*?-\\s(.*?)\/(?<currentValue>[^/]+)\/[^/]+\n",
        // for: apiVersion=helm.cattle.io/v1 kind=HelmChart
        "datasource=(?<datasource>\\S+)\n.*?repo: (?<registryUrl>\\S+)\n.*?chart: (?<depName>\\S+)\n.*?version: (?<currentValue>\\S+)\n",
      ],
      datasourceTemplate: "{{#if datasource}}{{{datasource}}}{{else}}github-releases{{/if}}",
      versioningTemplate: "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}",
    },
    {
      "customType": "regex",
      "description": ["Process CNPG imageVolume extensions"],
      "fileMatch": [".*"], // process regex from everywhere
      "matchStrings": [
        "reference:\\s+(?<depName>[^:@\\s]+):(?<currentValue>[^@\\s]+)(?:@(?<currentDigest>sha256:\\S+))?"
      ],
      datasourceTemplate: "docker",
    },
    {
      customType: "regex",
      description: "Process Grafana CRD version field",
      fileMatch: ["grafana-instance/.*\\.ya?ml$"],
      matchStrings: [
        "version:\\s*(?<depName>[^:]+):(?<currentValue>[^@\\s]+)@(?<currentDigest>sha256:[a-f0-9]+)",
      ],
      datasourceTemplate: "docker",
      autoReplaceStringTemplate: "version: {{{depName}}}:{{{newValue}}}@{{{newDigest}}}",
    },
    {
      customType: "regex",
      description: "Process OCI dependencies",
      managerFilePatterns: ["/\\.yaml(?:\\.j2)?$/"],
      matchStrings: ["oci://(?<depName>[^:]+):(?<currentValue>\\S+)"],
      datasourceTemplate: "docker",
    },
    {
      customType: "regex",
      description: "Process yaml-language-server schema versions from GitHub tags URLs",
      fileMatch: [".yaml"],
      matchStrings: [
        "\\$schema=https://raw\\.githubusercontent\\.com/(?<depName>[^/]+/[^/]+)/refs/tags/(?<currentValue>[^/]+)/",
      ],
      datasourceTemplate: "github-tags",
    },
    {
      customType: "regex",
      description: "Process yaml-language-server schema versions from flux2-schemas.pages.dev URLs",
      fileMatch: [".yaml"],
      matchStrings: [
        "\\$schema=https://flux2-schemas\\.pages\\.dev/helmrelease/v2/github/(?<depName>[^/]+/[^/]+)/(?<currentValue>[^/]+)/",
      ],
      datasourceTemplate: "github-tags",
    },
  ],
}
