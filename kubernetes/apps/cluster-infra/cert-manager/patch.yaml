---
# yaml-language-server: $schema=https://datreeio.github.io/CRDs-catalog/kustomize.toolkit.fluxcd.io/kustomization_v1.json
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: patch
spec:
  patches:
    - patch: |
        - op: add
          path: /spec/namespaceSelectors/-
          value:
            matchLabels:
              kubernetes.io/metadata.name: network
        - op: replace
          path: /metadata/name
          value: cloudflare
        - op: replace
          path: /spec/externalSecretSpec/dataFrom/0/extract/key
          value: cloudflare
      target:
        kind: ClusterExternalSecret
        labelSelector: dormammu.io/component=external-secret
