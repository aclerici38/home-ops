---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: patch
spec:
  patches:
    - patch: |-
        apiVersion: postgresql.cnpg.io/v1
        kind: Cluster
        metadata:
          name: patch
        spec:
          postgresql:
            shared_preload_libraries:
              - "timescaledb"
            parameters:
              timescaledb.telemetry_level: 'off'
              max_locks_per_transaction: '128'
            extensions:
              - name: timescaledb
                image:
                  reference: ghcr.io/shusaan/timescaledb-testing:2.24.0-18-trixie
      target:
        kind: Cluster
