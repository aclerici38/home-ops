#!opensips

socket=udp:0.0.0.0:5060
stderror_enabled=yes
syslog_enabled=yes

loadmodule "proto_udp.so"     # SIP over UDP
loadmodule "sl.so"            # stateless replies
loadmodule "tm.so"            # transaction module
loadmodule "rr.so"            # record‚Äêroute
loadmodule "maxfwd.so"        # loop detection
loadmodule "dns.so"           # DNS SRV lookups (for t_relay())

modparam("rr", "enable_double_rr", 1)
modparam("dns", "dns_engine", "native")

# Transparent SIP relay
route {
    if (!msg_present()) {
        exit;
    }

    if (is_method("REGISTER")) {
        sl_send_reply("200", "OK");
        exit;
    }

    record_route();

    if (!t_relay()) {
        sl_reply_error();
    }
}
