---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: patch
spec:
  patches:
    - patch: |-
        apiVersion: pocketid.internal/v1alpha1
        kind: PocketIDOIDCClient
        metadata:
          name: patch
        spec:
          secret:
            keys:
              clientID: client-id
              clientSecret: client-secret
      target:
        kind: PocketIDOIDCClient
    - patch: |-
        apiVersion: gateway.kgateway.dev/v1alpha1
        kind: TrafficPolicy
        metadata:
          name: patch
        spec:
          jwtAuth:
            extensionRef:
              name: ${APP}-jwt
      target:
        kind: TrafficPolicy
